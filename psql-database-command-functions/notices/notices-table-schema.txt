-- Create the notices table
CREATE TABLE notices (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  title TEXT NOT NULL,
  content TEXT,
  is_active BOOLEAN DEFAULT FALSE NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

-- Enable Row Level Security for the notices table
ALTER TABLE notices ENABLE ROW LEVEL SECURITY;

-- Create policy for reading active notices
CREATE POLICY "Allow public read for active notices" ON notices FOR SELECT USING (is_active = TRUE);

-- Create policy for admin access
CREATE POLICY "Allow admin full access" ON notices FOR ALL USING (auth.role() = 'authenticated') WITH CHECK (auth.role() = 'authenticated');
